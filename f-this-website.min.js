class FThisWebsite{constructor(t=document.body,e=" fudge ",s=25){this.self=this,this.container=t,this.word=e,this.speed=s,this.gameOn=!1,this.shooting=!1,this.maxX=window.innerWidth-this.speed,this.maxY=window.innerHeight-3*this.speed,this.draw(),document.addEventListener("keydown",t=>{switch(this.gameOn&&t.preventDefault(),t.code){case"F2":this.gameOn?this.stop():this.start();break;case"ArrowRight":this.move(this.shooterDiv,this.speed,null);break;case"ArrowLeft":this.move(this.shooterDiv,-this.speed,null);break;case"ArrowUp":this.shooting||this.shoot(this.shooterDiv)}return!1})}create(t,e=null,s=null){const o=document.createElement("div");if(o.className=t,e?e.appendChild(o):document.body.appendChild(o),"monster"===s){const t=Math.random().toString(36).substring(7);this.monsters.push({id:t,left:0,top:0}),o.id=t}else o.id=t;return o}draw(){this.gameDiv=this.create("game"),this.shooterDiv=this.create("shooter",this.gameDiv),this.scoreBoard=this.create("score-board",this.gameDiv)}start(){this.monsters=[],this.score=0,this.scoreBoard.innerText=this.score,this.gameOn=!0,this.gameDiv.style.display="block",document.body.style.overflow="hidden";const t=document.getElementsByClassName("monster");for(;t.length>0;)t[0].parentNode.removeChild(t[0]);this.monstersController()}stop(){this.gameOn=!1,this.gameDiv.style.display="none",document.body.style.overflow="auto"}gameOver(){this.gameOn=!1,confirm("Game Over! Do you want to play again?")&&this.start()}move(t,e=null,s=null,o="shooter"){if(!this.gameOn)return;let n=null,i=null,r=0,h=0;switch("monster"===o?(i=this.monsters.map(function(t){return t.id}).indexOf(t.id),n=this.monsters[i]):n=t.getBoundingClientRect(),r=n.left+e,h=n.top+s,o){case"monster":h>=this.maxY&&(h=0,this.gameOver()),this.monsters[i]&&(this.monsters[i].left=r,this.monsters[i].top=h),this.getWordAtPoint(this.container,n.left,n.top);break;case"shot":case"shooter":for(var d=0;d<this.monsters.length;++d){const t=this.monsters[d];if(r>=t.left-this.speed&&r<=t.left+this.speed&&h>=t.top-this.speed&&h<=t.top+this.speed){const e=document.getElementById(t.id);e.parentNode.removeChild(e),this.score+=1,this.scoreBoard.innerText=this.score,this.monsters=this.monsters.filter(function(e){return e.id!==t.id});break}}}return e&&(t.style.left=r+"px"),s&&(t.style.top=h+"px"),{x:r,y:h}}shoot(t){this.self.shooting=!0;const e=this.create("shot",this.gameDiv),s=t.getBoundingClientRect();this.move(e,s.left,s.top,"shot");const o=setInterval(()=>{parseInt(e.style.top,10)>0?this.move(e,null,-this.speed,"shot"):(clearInterval(o),this.self.shooting=!1,e.parentNode.removeChild(e))},this.speed)}monstersController(){if(!this.gameOn)return;let t=this.rand(40*this.speed,120*this.speed);const e=this.rand(1,3);for(var s=0;s<this.monsters.length;++s){const t=document.getElementById(this.monsters[s].id);this.move(t,2*(Math.random()-.5)*this.speed,this.speed,"monster")}for(var o=0;o<2;++o){const t=this.create("monster monster-"+e,this.gameDiv,"monster");this.move(t,this.rand(this.speed,this.maxX),this.rand(this.speed,20*this.speed),"monster")}setTimeout(()=>this.monstersController(),t)}getWordAtPoint(t,e,s){if(t.nodeType===t.TEXT_NODE){(h=t.ownerDocument.createRange()).selectNodeContents(t);for(var o=0,n=h.endOffset;o+1<n;){if(h.setStart(t,o),h.setEnd(t,o+1),h.getBoundingClientRect().left<=e&&h.getBoundingClientRect().right>=e&&h.getBoundingClientRect().top<=s&&h.getBoundingClientRect().bottom>=s){h.expand("word");var i=h.toString();return h.detach(),i!==this.word&&h.startContainer.parentNode.innerText&&(h.startContainer.parentNode.innerText=h.startContainer.parentNode.innerText.replace(i,this.word)),i}o+=1}}else for(var r=0;r<t.childNodes.length;r++){var h;if((h=t.childNodes[r].ownerDocument.createRange()).selectNodeContents(t.childNodes[r]),h.getBoundingClientRect().left<=e&&h.getBoundingClientRect().right>=e&&h.getBoundingClientRect().top<=s&&h.getBoundingClientRect().bottom>=s)return h.detach(),this.getWordAtPoint(t.childNodes[r],e,s);h.detach()}return null}rand(t,e){return Math.floor(Math.random()*(e-t+1)+t)}}